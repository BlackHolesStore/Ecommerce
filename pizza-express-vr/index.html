<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#ff6600" />
  <meta name="description" content="Pizza Express VR - An immersive VR pizza delivery game" />
  <title>Pizza Express VR Game</title>
  <link rel="manifest" href="/pizza-express-vr/manifest.json" />
  <link rel="icon" href="/pizza-express-vr/assets/favicon-BK7mrg_k.svg" />
  <link rel="apple-touch-icon" href="/pizza-express-vr/assets/favicon-BK7mrg_k.svg" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      position: fixed;
      touch-action: none;
      -webkit-overflow-scrolling: none;
      overscroll-behavior: none;
    }

    body {
      font-family: Arial, sans-serif;
      background: url('/pizza-express-vr/landing-page-background.gif') no-repeat center center;
      background-size: cover;
      background-attachment: fixed;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
    }

    h2 {
      text-align: center;
      color: #fff;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
      font-size: clamp(1.5rem, 6vw, 2.5rem);
      margin-bottom: 10px;
    }

    p {
      text-align: center;
      color: #eee;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
      font-size: clamp(0.9rem, 3vw, 1rem);
      margin-bottom: 20px;
    }

    #game-container {
      width: 100%;
      max-width: 400px;
    }
  </style>
</head>

<body>
  <div class="overlay">
    <h2>üçï Pizza Express VR Game</h2>
    <p>Welcome! Game loads without authentication required.</p>

    <!-- Game will load here -->
    <div id="game-container"></div>
  </div>

  <!-- Initialize game directly without Auth0 -->
  <script src="/pizza-express-vr/js/app-no-auth.js"></script>

  <!-- PWA Service Worker Registration -->
  <script>
    // Prevent pull-to-refresh and bounce scroll on mobile
    document.addEventListener('touchmove', function (e) {
      e.preventDefault();
    }, { passive: false });

    // Register service worker for PWA support
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/pizza-express-vr/sw.js').then(reg => {
        console.log('‚úÖ Service Worker registered');
      }).catch(err => {
        console.log('Service Worker registration failed:', err);
      });
    }

    // Handle install prompt - MUST set window.deferredPrompt inside the event handler
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      window.deferredPrompt = e;  // Store on window so app-no-auth.js can access it
      console.log('üì¶ Install prompt available');
    });

    // Lock screen orientation if supported
    if (screen.orientation && screen.orientation.lock) {
      // Don't lock - allow any orientation
      console.log('üì± Orientation API available');
    }
  </script>
</body>

</html>